<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ã–kostrombericht 2019</title>
    <script src="node_modules/lunr/lunr.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="node_modules/vue/dist/vue.js"></script>
  </head>
  <body>
    Hello

    <div id="app">
      {{ message }}
    </div>

    <script>
     document.addEventListener("DOMContentLoaded", function () {

       Vue.prototype.$http = axios;

       Vue.component('v-search', {
         props: [],
         template: `<label>Suche <input type="text" placeholder="Suche"></label>`,
         methods: {},
         computed: {}
       })

       Vue.component('v-item', {
         props: ['item'],
         template: `<li>
           <p><strong>{{ item['Firmenname'] }}</strong><br>
             {{ item['Adresse'] }} {{ item['PLZ'] }} {{ item['Stadt'] }} - <a :href="item['URL']">Website</a><br>
               <a :href="item['Link Stromkennzeichnung']">Stromkennzeichnung</a><br>
                 {{ reason( item['RoWo-Kriterien'] )}}</p>
         </li>`,
         methods: {
           reason(ident) {
             const reasons = {
               A: "âŒ Anbieter vertreibt neben Ã–kostrom auch Strom aus fossilen EnergietrÃ¤gern",
               B: "âŒ Anbieter gehÃ¶rt / ist angeschlossen an einen Konzern der Atom- oder Kohlekraftwerke betreibt oder mit Strom aus diesen Quellen (oder andern Fossielen EnergietrÃ¤gern) handelt",
               C: "âŒ Anbieter macht keinerlei Angaben zu Investitionen oder sonstige MaÃŸnahmen zur FÃ¶rderung der Energiewende",
               D: "âŒ Beteiligung von Atom- und Kohlekonzernen an den Kraftwerken?",
               R: "ğŸ¡ Regionale Ã–kostrom-Anbieter: Anbieter die den RoWo Kriterien (A-D) entsprechen, aber kein Ã¼berregionales Angebot haben",
               'R?': "ğŸ¡ Regionaler Ã–kostrom-Anbieter der im schnellcheck RoWo Kriterien (A-B) entspricht",
               X: "âœ”ï¸ Anbieter erfÃ¼llt Rowo Kriterien (Kriterien A-R sind erfÃ¼llt)",
               N: "â“ Reiner Netzbetreiber ohne eigenes Versorgungsangebot",
               '?': "âŒ Angaben auf Website uneindeutig ggf. noch mal genauer Ã¼berprÃ¼fen"
             }
             return `${ reasons[ident] ? reasons[ident] : 'ğŸ˜µ Error Will Robinson'  }`;
           }
         }
       })

       Vue.component('v-list', {
         props: ['list'],
         template: `<ul>
           <v-item v-for="item in list" :item="item"></v-item>
         </ul>`
       })

       var app = new Vue({
         el: '#app',
         data: {
           message: 'Hello Vue!',
           providers: []
         },
         template: `<div>
           <v-search></v-search>
             <v-list :list="this.providers"></v-list>
         </div>`,
         mounted: function() {
           const url = '/assets/providerdata-20190826.json';
           fetch(url).then((response)=>{
             return response.json();
           }).then((data)=>{
             this.providers = data;
             //console.log(this.providers);
           })
         }
       })

     })

    </script>
  </body>
</html>
